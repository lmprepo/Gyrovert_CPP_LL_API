# Gyrovert C++ API (Low Level)

<img src="https://mp-lab.ru/wp-content/uploads/2020/07/Izometria-IMG_20221122_175423.webp" width="100" height="100"> <img src="https://mp-lab.ru/wp-content/uploads/2022/04/gkv-6-1-1024x1024-1.webp" width="100" height="100">


Данный репозиторий включает библиотеку для приема данных и настройки параметров инерциальных модулей серий ГКВ и МГ производства ООО "Лаборатория Микроприборов", а также четыре консольных примера для Windows и Linux:

- прием любых данных с инерциального модуля и вывод значений в консоль
- прием данных с инерциального модуля в формате калиброванных данных с датчиков и вывод значений в консоль
- выбор алгоритма работы инерциального модуля, прием данных и вывод значений в консоль 
- запись бинарного файла LogData_{дата-время} с данными принятыми от инерциального модуля в директорию сборки (включает пример наследования LMP_Device пользовательским классом GKV_FileWriter)

Проект реализован с использованием системы сборки CMake. Библиотека представляет собой класс устройства LMP_Device, включающий:

- методы настройки основных параметров инерциального модуля.
- методы настройки callback-функций для всех типов данных выдаваемых устройством.
- структуры всех используемых инерциальным модулем пакетов.
- парсер принимаемых пакетов.

Библиотека НЕ работает напрямую с serial-портом. В примерах для работы с serial-портом использованы стандартная библиотека Win32, а также библиотека termios для Linux. Аналогично может быть использована любая удобная пользователю библиотека serial-порта для используемой платформы. Обработка принятых пакетов данных и отправка запросов осуществляется с помощью пользовательских callback-функций для каждого из возможных типов принимаемых пакетов, которые могут быть назначены для конкретного устройства, как показано в примерах.

Примечание: класс GKV_FileWriter, используемый в примере 4, не является оптимизированным, в высоконагруженных проектах рекомендуется создавать пользовательский класс (наследующий LMP_Device), использующий библиотеку работы с serial-портом, оптимизированную для вашей платформы (или кроссплатформенную библиотеку, например, ASIO или Qt5)

Подробное описание структур данных и методов класса LMP_Device представлено в прилагаемом pdf-документе Gyrovert C++ API (Low Level)

Примечание 2: Для того, чтобы устройство корректно обрабатывало команды и запросы из разделов 3.2 и 3.3 руководства, необходимо, чтобы между отправкой команд была задержка как минимум в 3,5 символа соответственно текущей скорости последовательного интерфейса. 

Подробную информацию об инерциальных модулях можно найти на сайте https://mp-lab.ru/
